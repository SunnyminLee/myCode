<meta  charset="utf-8"/>
<script>
    // var Plane = function(){} 
 
    // Plane.prototype.fire = function(){     
    //      console.log( '发射普通子弹' ); 
    // } 
    // //接下来增加两个装饰类，分别是导弹和原子弹
    // var MissileDecorator = function( plane ){     
    //     this.plane = plane;
    // } 
  
    // MissileDecorator.prototype.fire = function(){     
    //     this.plane.fire();     
    //     console.log( '发射导弹' ); 
    // } 
  
    // var AtomDecorator = function( plane ){     
    //     this.plane = plane; 
    // } 
  
    // AtomDecorator.prototype.fire = function(){     
    //     this.plane.fire();     
    //     console.log( '发射原子弹' ); 
    // } 

    // //看看测试结果： 
    // var plane = new Plane(); 
    // plane = new MissileDecorator( plane ); 
    // plane = new AtomDecorator( plane ); 
 
    // plane.fire(); // 分别输出： 发射普通子弹、发射导弹、发射原子弹

    //JavaScript的装饰者
    // var plane = {     
    //     fire: function(){         
    //         console.log( '发射普通子弹' );     
    //     }
    // } 
 
    // var missileDecorator = function(){      
    //     console.log( '发射导弹' ); 
    // } 
 
    // var atomDecorator = function(){     
    //     console.log( '发射原子弹' ); 
    // } 
 
    // var fire1 = plane.fire; 
 
    // plane.fire = function(){     
    //     fire1();    
    //     missileDecorator(); 
    // } 
 
    // var fire2 = plane.fire; 
 
    // plane.fire = function(){     
    //     fire2();    
    //     atomDecorator(); 
    // } 
 
    // plane.fire(); // 分别输出： 发射普通子弹、发射导弹、发射原子弹 


    //，如果在原函数上保存了一些属性，那么这些属性会丢失
    var func = function(){     
        alert( 1 );  
    } 
    func.a = 'a'; 
    Function.prototype.before = function( beforefn ){     
        var __self = this;       
        return function(){         
            if ( beforefn.apply( this, arguments ) === false ){                 // beforefn 返回 false 的情况直接 return，不再执行后面的原函数             
                return;         
            }         
            return __self.apply( this, arguments );     
        } 
    } 
    func = func.before( function(){      
        alert( 2 ); 
    }); 
    //c= func();
   // console.log(c);   // 输出：undefined 
</script>